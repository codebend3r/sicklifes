<preloader loading='loading'></preloader>

<div ng-if='!loading' class='panel-body'>

  <h2>Standings</h2>

  <select class='form-control' ng-model='selectedMonth' ng-options='option.monthName for option in allMonths' ng-change='changeMonth(selectedMonth)'></select>

  <div ng-if='admin' class='well'>
    <button type='button' class='btn btn-danger' ng-click='updateAllManagerData()'>Update All Managers Data</button>
    <button type='button' class='btn btn-danger' ng-click='saveRoster()'>Save Roster</button>
  </div>

  <table class='table table-hover table-responsive'>
    <thead>
    <tr>
      <th>Team</th>
      <th>DG</th>
      <th>CLG</th>
      <th>EG</th>
      <th>PTS</th>
    </tr>
    </thead>
    <tbody>
    <tr class="manager-row" ng-repeat="manager in managersData | orderObjectBy:'totalPoints':true">
      <td class="manager-{{manager.managerName | lowercase}}">
        <div class="vertical-center">
          <svg height="20" width="20">
            <circle class="manager-circle" cx="10" cy="10" r="10"/>
            Sorry, your browser does not support inline SVG.
          </svg>
          &nbsp;&nbsp;<a class="manager-name" ui-sref="managers({managerId: manager.managerName.toLowerCase()})">{{manager.managerName}}</a>
        </div>
      </td>
      <td>{{manager.domesticGoals}}</td>
      <td>{{manager.clGoals}}</td>
      <td>{{manager.eGoals}}</td>
      <td>{{manager.totalPoints}}</td>
    </tr>
    </tbody>
  </table>

  <h3>Latest Goals by All Managers</h3>

  <!-- desktop table -->
  <table class='table table-hover table-responsive hidden-sm hidden-xs'>
    <thead>
    <tr>
      <th>Player</th>
      <th>Manager</th>
      <th>G</th>
      <th>S</th>
      <th>Score</th>
      <th>Date Played</th>
    </tr>
    </thead>

    <tbody>
    <tr ng-repeat="player in combinedLogs | filter: {goalsScored: '!0'} | orderBy: '-datePlayed' | limitTo: 15">
      <td>
        <img width="40" height="40" ng-src="{{player.teamLogo}}"/>&nbsp;<a class="bold" ui-sref="playerDetails({playerId: player.id})">{{player.playerName}}</a>
      </td>
      <td>{{player.managerName}}</td>
      <td>{{player.goalsScored}}</td>
      <td>{{player.shots}}</td>
      <td>{{player.result}} {{player.finalScore}}</td>
      <td>{{player.datePlayed}}</td>
    </tr>
    </tbody>

  </table>

  <!-- mobile table -->
  <table class='table table-hover table-responsive hidden-lg hidden-md'>
    <thead>
    <tr>
      <th>Player</th>
      <th>Manager</th>
      <th>G</th>
      <th>Date</th>
    </tr>
    </thead>

    <tbody>
    <tr ng-repeat="player in combinedLogs | filter: {goalsScored: '!0'} | orderBy: '-datePlayed' | limitTo: 15">
      <td>
        <a class="bold" ui-sref="playerDetails({playerId: player.id})">{{player.playerName}}</a>
      </td>
      <td>{{player.managerName}}</td>
      <td>{{player.goalsScored}}</td>
      <td class="small-text">{{player.datePlayed}}</td>
    </tr>
    </tbody>

  </table>

  <!-- <h3>Showing last {{showLastAmount}} data points.</h3> -->

  <!--<div ng-if="loadingChart" class="spinner">
    <div class="dot1"></div>
    <div class="dot2"></div>
  </div>
  <div ng-show="!loadingChart" class="ct-chart"></div>-->

</div>
