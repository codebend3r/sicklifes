<preloader loading='loading'></preloader>

<div ng-if='!loading' class='panel-body'>

  <h2>Transfers</h2>
  <h3>Transaction for: <b>{{ selectedManager.managerName }}</b></h3>

  <!--<span>managersData:</span><json-formatter json="managersData" open="0"></json-formatter>-->
  <!--<span>allPlayers:</span><json-formatter json="allPlayers" open="0"></json-formatter>-->
  <span>allPlayers:</span><json-formatter json="selectedPlayers" open="0"></json-formatter>

  <div class='well'>
    <select class='form-control' ng-model='selectedManager' ng-options='option.managerName for option in managersData' ng-change='changeManager(selectedManager)'></select>
  </div>

  <div ng-if='admin' class='well'>
    <button type='button' class='btn btn-danger' ng-click='updatePlayerPoolData()'>Update Player Pool Data</button>
    <button type='button' class='btn btn-danger' ng-click='saveToFireBase()'>Save to Firebase</button>
    <button type='button' class='btn btn-danger' ng-click='resetAllPlayers()'>Reset All Players</button>
    <button type='button' class='btn btn-danger' ng-click='saveRoster()'>Save Roster</button>
  </div>

  <div class='transfer-container' ng-if='transactionPlayerAdded || transactionPlayerRemoved'>
    <div class='col-md-6' ng-if='transactionPlayerAdded'>
      <div class='col-md-4'>
        <img class='profile-pic' ng-src='{{addedPlayerObject.playerImage}}'/>
      </div>
      <div class='col-md-8'>
        <p class='bold green'>ADDS PLAYER</p>
        <p>Player ID: <b>{{ addedPlayerObject.id }}</b></p>
        <p>Player Name: <b>{{ addedPlayerObject.playerName }}</b></p>
        <p>Team: <b>{{ addedPlayerObject.teamName }}</b></p>
        <p>League: <b>{{ addedPlayerObject.leagueName }}</b></p>
      </div>
    </div>
    <div class='col-md-6' ng-if='transactionPlayerRemoved'>
      <div class='col-md-4'>
        <img class='profile-pic' ng-src='{{droppedPlayerObject.playerImage}}'/>
      </div>
      <div class='col-md-8'>
        <p class='bold red'>DROPS PLAYER</p>
        <p>Player ID: <b>{{ droppedPlayerObject.id }}</b></p>
        <p>Player Name: <b>{{ droppedPlayerObject.playerName }}</b></p>
        <p>Team: <b>{{ droppedPlayerObject.teamName }}</b></p>
        <p>League: <b>{{ droppedPlayerObject.leagueName }}</b></p>
      </div>
    </div>
  </div>

  <custom-table ng-if='!transactionPlayerAdded' table-body-template='all-players' add-player='addPlayer(player)' drop-player='dropPlayer(player)' list='allPlayers' table-name='All Players' table-header='tableHeader'></custom-table>
  <custom-table ng-if='transactionPlayerAdded' table-body-template='manager-players' drop-player='dropPlayer(player)' list='selectedPlayers' table-name='Manager Players' table-header='managersTableHeader'></custom-table>

</div>
